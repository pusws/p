<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WebNav Hub - 测试页面</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />
    <style>
        /* 加载指示器 */
        .loading-indicator {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0d0d0d;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #ff9000;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-indicator p {
            margin-top: 20px;
            font-size: 1.2rem;
            color: #ff9000;
        }
        
        /* 键盘焦点样式 */
        nav a:focus,
        .link-card:focus {
            outline: 2px solid #ff9000;
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <div id="loadingIndicator" class="loading-indicator">
        <div class="spinner"></div>
        <p>加载中...</p>
    </div>
    
    <header>
        <h1>WebNav Hub</h1>
    </header>
    <nav>
        <ul>
            <li><a href="#ai-search" class="active">Ai搜索</a></li>
            <li><a href="#social">社交媒体</a></li>
            <li><a href="#tools">实用工具</a></li>
            <li><a href="#tech-news">科技资讯</a></li>
            <li><a href="#cloud-storage">云存储</a></li>
            <li><a href="#email">电子邮箱</a></li>
        </ul>
    </nav>
    <main id="main-content">
        <!-- 动态内容将通过JavaScript生成 -->
    </main>
    <footer>
        <p>© 2025 WebNav Hub. 保留所有权利。</p>
    </footer>
    
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var navLinks = document.querySelectorAll("nav a");

            // 模拟从JSON文件加载数据
            const data = {
              "categories": [
                {
                  "id": "ai-search",
                  "title": "Ai搜索",
                  "links": [
                    {
                      "url": "https://www.google.com",
                      "icon": "fa-brands fa-google",
                      "title": "Google"
                    },
                    {
                      "url": "https://unlimitedai.chat/",
                      "icon": "fa-solid fa-pepper-hot",
                      "title": "无限制AI"
                    },
                    {
                      "url": "https://openrouter.ai/",
                      "icon": "fa-brands fa-openid",
                      "title": "openrouter"
                    },
                    {
                      "url": "https://websim.ai/",
                      "icon": "fa-solid fa-magnifying-glass",
                      "title": "websim"
                    },
                    {
                      "url": "https://chatgpt.com/",
                      "icon": "fa-brands fa-google",
                      "title": "chatgpt"
                    },
                    {
                      "url": "https://www.doubao.com/chat/",
                      "icon": "fa-solid fa-paw",
                      "title": "傻豆包"
                    }
                  ]
                },
                {
                  "id": "social",
                  "title": "社交媒体",
                  "links": [
                    {
                      "url": "https://www.facebook.com",
                      "icon": "fa-brands fa-facebook",
                      "title": "Facebook"
                    },
                    {
                      "url": "https://x.com/",
                      "icon": "fa-brands fa-twitter",
                      "title": "Twitter"
                    },
                    {
                      "url": "https://www.instagram.com",
                      "icon": "fa-brands fa-instagram",
                      "title": "Instagram"
                    },
                    {
                      "url": "https://github.com/",
                      "icon": "fa-brands fa-github",
                      "title": "GitHub"
                    }
                  ]
                }
              ]
            };

            const mainContent = document.getElementById('main-content');
            
            data.categories.forEach((category, index) => {
                // 创建分类标题
                const categoryTitle = document.createElement('h2');
                categoryTitle.className = 'category-title';
                categoryTitle.id = category.id;
                categoryTitle.textContent = category.title;
                categoryTitle.setAttribute('tabindex', '-1'); // 使标题可聚焦
                
                // 创建链接网格容器
                const linkGrid = document.createElement('section');
                linkGrid.className = 'link-grid';
                linkGrid.setAttribute('role', 'region');
                linkGrid.setAttribute('aria-labelledby', category.id);
                
                // 为每个链接创建卡片
                category.links.forEach((link, linkIndex) => {
                    const linkCard = document.createElement('div');
                    linkCard.className = 'link-card';
                    linkCard.setAttribute('role', 'link');
                    linkCard.setAttribute('tabindex', '0');
                    linkCard.setAttribute('aria-label', link.title);
                    
                    // 添加键盘支持
                    linkCard.addEventListener('keydown', function(e) {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            window.open(link.url, '_blank');
                        }
                    });
                    
                    linkCard.innerHTML = `
                        <a href="${link.url}" target="_blank" aria-label="${link.title}" rel="noopener"></a>
                        <i class="${link.icon}" aria-hidden="true"></i>
                        <h3>${link.title}</h3>
                    `;
                    
                    linkGrid.appendChild(linkCard);
                });
                
                // 将分类标题和链接网格添加到主内容区
                mainContent.appendChild(categoryTitle);
                mainContent.appendChild(linkGrid);
            });
            
            // 隐藏加载指示器
            const loadingIndicator = document.getElementById('loadingIndicator');
            if (loadingIndicator) {
                loadingIndicator.style.display = 'none';
            }
            
            // 初始化导航功能
            initNavigation();

            function initNavigation() {
                navLinks.forEach(function (link) {
                    link.addEventListener("click", function (e) {
                        e.preventDefault();
                        navLinks.forEach((l) => l.classList.remove("active"));
                        this.classList.add("active");
                        var targetId = this.getAttribute("href").split("#")[1];
                        var targetElement = document.getElementById(targetId);
                        if (targetElement) {
                            targetElement.scrollIntoView({ behavior: "smooth" });

                            var newUrl =
                                window.location.protocol +
                                "//" +
                                window.location.host +
                                window.location.pathname +
                                "#" +
                                targetId;
                            window.history.pushState({ path: newUrl }, "", newUrl);
                        }
                    });
                });

                function handleHashChange() {
                    var hash = window.location.hash;
                    if (hash) {
                        var targetElement = document.getElementById(hash.substring(1));
                        if (targetElement) {
                            targetElement.scrollIntoView({ behavior: "smooth" });
                            var activeLink = document.querySelector(
                                'nav a[href="' + hash + '"]'
                            );
                            if (activeLink) {
                                navLinks.forEach((l) => l.classList.remove("active"));
                                activeLink.classList.add("active");
                            }
                        }
                    }
                }

                window.addEventListener("hashchange", handleHashChange);
                handleHashChange(); // Call on initial load
            }
        });
    </script>
</body>
</html>